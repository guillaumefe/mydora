async function resetAll() {
    // Double confirmation pour éviter les suppressions accidentelles
    const confirmMessage = '⚠️ ATTENTION : Vous êtes sur le point de supprimer TOUTES les données de la base. Cette action est irréversible.';
    const confirmPassword = 'RESET';
    
    if (!confirm(confirmMessage)) {
        return;
    }

    const userInput = prompt(`Pour confirmer la suppression, tapez "${confirmPassword}" en majuscules:`);
    if (userInput !== confirmPassword) {
        showNotification('Suppression annulée', 'info');
        return;
    }

    try {
        showLoading();
        console.log('Début de la suppression totale...');

        // Récupérer tous les documents
        const snapshot = await db.collection(COLLECTION_PATH).get();
        console.log(`${snapshot.size} documents trouvés à supprimer`);

        if (snapshot.empty) {
            showNotification('Aucune donnée à supprimer', 'info');
            return;
        }

        // Supprimer par lots de 500 (limite de Firestore pour les batches)
        const deleteByBatch = async (documents) => {
            const batch = db.batch();
            documents.forEach(doc => {
                batch.delete(doc.ref);
            });
            await batch.commit();
        };

        // Diviser en lots de 500
        const batchSize = 500;
        const docs = snapshot.docs;
        const totalBatches = Math.ceil(docs.length / batchSize);
        
        for (let i = 0; i < totalBatches; i++) {
            const start = i * batchSize;
            const end = Math.min((i + 1) * batchSize, docs.length);
            const batch = docs.slice(start, end);
            
            await deleteByBatch(batch);
            console.log(`Batch ${i + 1}/${totalBatches} supprimé`);
            
            // Mettre à jour la progression
            showProgressNotification(`Suppression en cours : ${Math.round(((i + 1) / totalBatches) * 100)}%`);
        }

        // Réinitialiser les variables locales
        allRegulations = [];
        displayedRegulations = [];
        currentPage = 1;
        lastDoc = null;

        // Réinitialiser l'interface
        resetArticleForm();
        document.getElementById('wallItems').innerHTML = '<div class="no-data">Aucune donnée</div>';
        updateMetadata([]);

        showNotification('Toutes les données ont été supprimées', 'success');
        console.log('Suppression totale terminée avec succès');

    } catch (error) {
        console.error('Erreur lors de la suppression:', error);
        showNotification('Erreur lors de la suppression des données', 'error');
    } finally {
        hideLoading();
        hideProgressNotification();
    }
}
